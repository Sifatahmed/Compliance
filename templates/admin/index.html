



<!DOCTYPE html>
<html lang="en">

<head>
    {% load i18n static %}

    <title>Compliance</title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Datta Able Bootstrap admin template made using Bootstrap 4 and it has huge amount of ready made feature, UI components, pages which completely fulfills any dashboard needs." />
    <meta name="keywords" content="admin templates, bootstrap admin templates, bootstrap 4, dashboard, dashboard templets, sass admin templets, html admin templates, responsive, bootstrap admin templates free download,premium bootstrap admin templates, datta able, datta able bootstrap admin template">
    <meta name="author" content="Codedthemes" />

    <!-- Favicon icon -->
    <link rel="icon" href="/static/assets/images/favicon.ico" type="image/x-icon">
    <!-- fontawesome icon -->
    <link rel="stylesheet" href="/static/assets/fonts/fontawesome/css/fontawesome-all.min.css">
    <!-- animation css -->
    <link rel="stylesheet" href="/static/assets/plugins/animation/css/animate.min.css">
    <!-- vendor css -->
    <link rel="stylesheet" href="/static/assets/css/style.css">

</head>

<body>
    <!-- [ Pre-loader ] start -->
    <div class="loader-bg">
        <div class="loader-track">
            <div class="loader-fill"></div>
        </div>
    </div>
    <!-- [ Pre-loader ] End -->

    <!-- [ navigation menu ] start -->
    <nav class="pcoded-navbar">
        <div class="navbar-wrapper">
            <div class="navbar-brand header-logo">
                <a href="index.html" class="b-brand">
                    <div class="b-bg">
                        <a href="/admin/">
                            <img src="/media/media/light_small.png" id="logo">
                        </a>
                    </div>

                </a>
                <a class="mobile-menu" id="mobile-collapse" href="#!"><span></span></a>
            </div>
            <div class="navbar-content scroll-div">
                <ul class="nav pcoded-inner-navbar">
                    <li class="nav-item pcoded-menu-caption">
                        <label>Navigation</label>
                    </li>
                    <li data-username="dashboard Default Ecommerce CRM Analytics Crypto Project" class="nav-item">
                        <a href="/admin" class="nav-link"><span class="pcoded-micon"><i class="feather icon-home"></i></span><span class="pcoded-mtext">Dashboard</span></a>
                    </li>
                    <li class="nav-item pcoded-menu-caption">
                        <label>Other</label>
                    </li>
                    <li data-username="Menu levels Menu level 2.1 Menu level 2.2" class="nav-item pcoded-hasmenu">
                        <a href="#!" class="nav-link"><span class="pcoded-micon"><i class="feather icon-menu"></i></span><span class="pcoded-mtext">Other Modules</span></a>
                        <ul class="pcoded-submenu">
                            

                            <li class=""><a href="/admin/compliance_digitalization_app/inputframingmodule/" class="">Compliance Obligations</a></li>
                            {% if request.user.user_type == '1' %}
                            <li class=""><a href="/admin/new/directive/status/list?" class="">New Directive Circulation</a></li>
                            {% else %}
                            <li class=""><a href="/admin/compliance_digitalization_app/newdirectivecirculation/" class="">New Directive Circulation</a></li>
            
    
                            {% endif %}

                                    {% if request.user.user_type|stringformat:"s" == '1' %}
                                    <li class=""><a href="/admin/compliance_digitalization_app/policyadvocacy/" class="">Policy Advocacy</a></li>
                                    <li class=""><a href="/admin/compliance_digitalization_app/documentrepository/" class="">Document Repository</a></li>
                                    <li class=""><a href="/notice-board/" class="">BTRC New Developments</a></li>



                                    <li class=""><a href="" class="">List of License (Allocation and Expiration)</a></li>
                                    <li class=""><a href="" class="">Penalty</a></li>
                                    <li class=""><a href="/admin/compliance_digitalization_app/auditreport/" class="">Audit Reports</a></li>
                                    <li class=""><a href="" class="">Compliance Historical Reports</a></li>
                                    {% endif %}
                        </ul>
                    </li>
                    <li data-username="Disabled Menu" class="nav-item disabled"><a href="/admin/logout" class="nav-link"><span class="pcoded-micon"><i class="feather icon-power"></i></span><span class="pcoded-mtext">Logout</span></a></li>
                    {% if request.user.is_superuser or request.user.user_type|stringformat:"s" == '1' %}
                    <li data-username="Sample Page" class="nav-item"><a href="/admin/compliance_digitalization_app/user/" class="nav-link"><span class="pcoded-micon"><i class="feather icon-sidebar"></i></span><span class="pcoded-mtext">Users</span></a></li>
                    <li data-username="Sample Page" class="nav-item"><a href="/admin/compliance_digitalization_app/inputframingmodule/" class="nav-link"><span class="pcoded-micon"><i class="fa fa-briefcase" aria-hidden="true"></i></span><span class="pcoded-mtext">Compliance Framing Modules</span></a></li>
                    <li data-username="Sample Page" class="nav-item"><a href="/admin/compliance_digitalization_app/inputmodule/" class="nav-link"><span class="pcoded-micon"><i class="fa fa-flag" aria-hidden="true"></i></span><span class="pcoded-mtext">Compliance Modules</span></a></li>

                    <li data-username="Sample Page" class="nav-item"><a href="/admin/compliance_digitalization_app/inputmodule?objects_status=2" class="nav-link"><span class="pcoded-micon"><i class="fa fa-bolt" aria-hidden="true"></i></span><span class="pcoded-mtext">Responder List</span></a></li>
                    <li data-username="Sample Page" class="nav-item"><a href="/admin/compliance_digitalization_app/complianceowner/" class="nav-link"><span class="pcoded-micon"><i class="fa fa-bookmark" aria-hidden="true"></i></span><span class="pcoded-mtext">Compliance Owners</span></a></li>
                    <li data-username="Sample Page" class="nav-item"><a href="/admin/compliance_digitalization_app/compliancecategory/" class="nav-link"><span class="pcoded-micon"><i class="fa fa-ellipsis-v" aria-hidden="true"></i></span><span class="pcoded-mtext">Categories</span></a></li>
                    {% else %}

                    <li data-username="Sample Page" class="nav-item"><a href="/admin/compliance_digitalization_app/inputmodule/" class="nav-link"><span class="pcoded-micon"><i class="fa fa-flag" aria-hidden="true"></i></span><span class="pcoded-mtext">Compliance Modules</span></a></li>
                    {% endif %}
<!--                    <li class="nav-item pcoded-menu-caption">-->
<!--                        <label>Support</label>-->
<!--                    </li>-->
<!--                    <li data-username="Documentation" class="nav-item"><a href="docs.html" class="nav-link" target="_blank"><span class="pcoded-micon"><i class="feather icon-book"></i></span><span class="pcoded-mtext">Documentation</span></a></li>-->
<!--                    <li data-username="Need Support" class="nav-item"><a href="https://codedthemes.support-hub.io/" class="nav-link" target="_blank"><span class="pcoded-micon"><i class="feather icon-help-circle"></i></span><span class="pcoded-mtext">Need-->
<!--                                support ?</span></a></li>-->
                </ul>
            </div>
        </div>
    </nav>
    <!-- [ navigation menu ] end -->

    <!-- [ Header ] start -->
    <!-- [ Header ] end -->

    <!-- [ chat user list ] start -->

    <!-- [ chat user list ] end -->

    <!-- [ chat message ] start -->
    <!-- [ chat message ] end -->

    <!-- [ Main Content ] start -->
    <div class="pcoded-main-container">


{% block content %}

    {% if request.user.user_type|stringformat:"s" != '2'%}

    <a class="inbox_a" href="/admin/compliance_digitalization_app/inputmodule/?objects_status=2"><div class="inbox">Inbox</div>  </a>

    {% endif %}







<div style="    display: block;
    height: 480px;
    box-shadow: 0 -2px 3px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19) !important;
    padding-top: 6%;
    padding-left: 3%;">

    <div class="compliance_status">
        <div class="head">Compliance Status</div>
        <canvas id="pie-chart"></canvas>
    </div>

    <a style="display:none" href="/admin/compliance_digitalization_app/inputmodule/">
        <div class="division_chart">
            <div class="head">QoQ Comparison</div>
            <div id="chartContainer" style="height: 370px; width: 100%;"></div>
        </div>
    </a>


    {% if request.user.user_type ==  '1'%}
    <div id="division_chart" style=" width: 50%; height: 341px; background-color: #eee; display: inline-block; float: left;">
        <div class="head">Division Wise Status</div>
        <div id="title_line_chart"></div>
        <div id="line_chart"></div>
    </div>
    {% endif %}
</div>

{% if request.user.user_type ==  '1'%}


<section class="pcoded-main-container">
    <div class="pcoded-wrapper">
        <div class="pcoded-content">
            <div class="pcoded-inner-content">
                <!-- [ breadcrumb ] end -->
                <div class="main-body">
                    <div class="page-wrapper">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card">
                                    <div class="card-block">
                                        <h3 class="mb-4 mt-5">Quarter On Quarter</h3>
                                        <div class="row">
                                            <div class="col-md-12 mb-5">
                                                <h5></h5>
                                                <hr>
                                                <div id="am-xy-1" style="height: 400px"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<script src="/static/compliance_digitalization_app/assets/js/vendor-all.min.js"></script>
<script src="/static/compliance_digitalization_app/assets/plugins/chart-am4/js/core.js"></script>
<script src="/static/compliance_digitalization_app/assets/plugins/chart-am4/js/charts.js"></script>
<script src="/static/compliance_digitalization_app/assets/plugins/chart-am4/js/animated.js"></script>



<script src="/static/compliance_digitalization_app/assets/js/jquery.min.js"></script>
<script src="/static/compliance_digitalization_app/assets/js/Chart.min.js"></script>
<script src="/static/compliance_digitalization_app/assets/js/chart.js"></script>
<script src="/static/compliance_digitalization_app/assets/js/canvasjs.min.js"></script>
<script src="/static/compliance_digitalization_app/assets/js/plotly-1.2.0.min.js"></script>
<!-- <script src="https://cdn.plot.ly/plotly-1.2.0.min.js"></script> -->

<script type="text/javascript">
    

                    $.ajax({
                    url: '/GetQoQData',
                    datatype: 'json',
                    type: 'GET',
                    success: function (data) {

                        var data = [
                          {
                            x: data[0],
                            y: data[1],
                            type: 'bar',
                              marker: {
                                color: '#ebb134'
                              }

                          }
                        ];

Plotly.newPlot('am-xy-1', data);
                    }
                });


</script>




{% endif %}







<style>

.user-select-none.svg-container svg {
    margin-top: -3%;
    height: 98%;
}

.plot-container.plotly {
    height: 349px;
}

.user-select-none.svg-container {
    width: 100% !important;
}

.user-select-none.svg-container svg {
    width: 100%;
}

h3.mb-4.mt-5 {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}

.card-block {
    height: 100%;
    overflow: hidden;
}

.card {
    width: 600px;
    height: 450px;
}
.modebar--hover {
    display: none;
}

a.inbox_a {
    margin-right: 1%;
    margin-top: 1%;
}

    a.canvasjs-chart-credit {
        display: none !important
    }

    div#title_line_chart {
        width: 38%;
        height: 100%;
        display: inline-block;
        float: left;
        padding-left: 5px;
        font-size: 11px;
    }

    li#yes {
        background-color: green;
    }

    li#no {
        background-color: red;
    }

    div#list_div li {
        display: inline-block;
        float: left;
        color: #fff;
        text-align: center;
        border-radius: 3px;
    }



    div#list_div {
        width: 100%;
        display: block;
        height: 20px;
    }

    div#line_chart {
        height: 100%;
        width: 60%;
        display: inline-block;
        float: left;
    }

    div#line li {
        display: inline-block;
        float: left;
    }

    div#line {
        display: block;
        height: 22px;
        width: 100%;
    }

    .option div {
        display: inline-block;
        float: left;
        width: 240px;
        height: 60px;
        background-color: #eee;
        margin-left: 10%;
        margin-top: 10px;
        text-align: center;
    }

    .option {
        display: block;
        width: 1200px;
        height: 200px;
        margin: auto;
        margin-top: 3%;
    }

        .option div {
            box-shadow: 0 -2px 3px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19) !important;
        }

        .option li {
            list-style: none;
            font-size: 18px;
            margin-top: 7%;
        }


    .QoQ_status {
        width: 400px;
        height: 341px;
        background-color: #eee;
        display: inline-block;
        float: left;
        margin-left: 3%;
        overflow: hidden;
    }

    .division_chart {
        width: 400px;
        height: 341px;
        background-color: #eee;
        display: inline-block;
        float: left;
        margin-left: 3%;
        margin-right: 1%;
    }

    .compliance_status {
        width: 400px;
    }

    canvas#pie-chart {
        width: 93% !important;
        height: 80% !important;
    }

    .compliance_status {
        width: 46%;
        height: 341px;
        background-color: #eee;
        display: inline-block;
        float: left;
        margin-right: 10px
    }

    .head {
        text-align: center;
        font-size: 18px;
        background-color: #d7d5d5;
        height: 30px;
        padding-top: 2px;
        overflow: hidden;
    }
</style>

<style type="text/css">
    @keyframes chartjs-render-animation {
        from {
            opacity: .99
        }

        to {
            opacity: 1
        }
    }

    .chartjs-render-monitor {
        animation: chartjs-render-animation 1ms
    }

    .chartjs-size-monitor, .chartjs-size-monitor-expand, .chartjs-size-monitor-shrink {
        position: absolute;
        direction: ltr;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
        pointer-events: none;
        visibility: hidden;
        z-index: -1
    }

        .chartjs-size-monitor-expand > div {
            position: absolute;
            width: 1000000px;
            height: 1000000px;
            left: 0;
            top: 0
        }

        .chartjs-size-monitor-shrink > div {
            position: absolute;
            width: 200%;
            height: 200%;
            left: 0;
            top: 0
        }

    .report_header {
        text-align: center;
        font-size: 15px;
        font-weight: 800;
        padding: 10px;
        /*background-color: #b9b4b4 !important;*/
        border-radius: 1px;
    }

    .report_bar {
        width: 48%;
        float: left;
        padding-right: 20px;
    }

    .report_body {
        margin-top: 15px;
        box-shadow: 1px 2px 3px 1px #d8d8d8;
        border-radius: 5px;
        padding: 15px;
        BORDER-TOP: 2PX SOLID #2196F3;
    }

        .report_body:hover {
            box-shadow: 3px 4px 3px 2px #d8d8d8;
        }

    .section {
        border-collapse: collapse;
        width: 100%;
    }

        .section th, .section td {
            text-align: left;
            padding: 8px;
        }

    .tbl_head {
        padding: 10px;
        border-bottom: 1px solid #2196F3;
        display: inline-block;
        font-size: 12px;
        font-weight: 700;
        color: #2196F3;
    }

    .overflow {
        height: 400px;
        overflow: scroll;
    }


    .dashboard #content {
        width: 90%;
        display: block;
        margin: auto;
    }

    a.inbox_a {
        display: block;
        height: 50px;
        width: 70px;
        background-color: #eee;
        text-align: center;
        line-height: 45px;
        float: right;
        border-radius: 5px;
        margin-bottom: 12px;
    }
</style>
<script>



    $.ajax({
        type: 'GET',
        url: '/division/status/',
        data: { get_param: 'value' },
        dataType: 'json',
        success: function (data) {
            for (i = 0; i < data.com_owner_list.length; i++) {
                var li = document.createElement("div");
                li.id = 'list_div'
                var create_div = document.getElementById("title_line_chart").appendChild(li);
                create_div.innerHTML = data.com_owner_list[i]
            }
            for (i = 0; i < data.com_owner_data_list.length; i++) {
                var keys = Object.keys(data.com_owner_data_list[i]);
                var li = document.createElement("div");
                li.id = 'list_div'
                var create_div = document.getElementById("line_chart").appendChild(li);
                var list_create_yes = document.createElement('li');
                var list_create_no = document.createElement('li');




                list_create_yes.id = 'yes'
                list_create_no.id = 'no'


                var list_append_yes = create_div.appendChild(list_create_yes);
                var list_append_no = create_div.appendChild(list_create_no);


                list_append_yes.innerHTML = data.com_owner_data_list[i][0].toFixed(2)  + '%'
                list_append_no.innerHTML = data.com_owner_data_list[i][1].toFixed(2)  + '%'

                list_append_yes.setAttribute("style", "background-color: #54b346");
                list_append_no.setAttribute("style", "background-color: red;");


                list_append_yes.setAttribute("style", "width:" + data.com_owner_data_list[i][0].toFixed(2)  + "%");
                list_append_no.setAttribute("style", "width:" + data.com_owner_data_list[i][1].toFixed(2)  + "%");

            }
        }
    });

</script>

<script>





    window.onload = function () {

        var chart = new CanvasJS.Chart("chartContainer", {
            animationEnabled: true,
            theme: "light2", // "light1", "light2", "dark1", "dark2"


            data: [{
                type: "column",
                showInLegend: false,
                legendMarkerColor: "",
                legendText: "",
                dataPoints: [
                    { y: 0, label: "20" },
                    { y: 20, label: "40" },
                    { y: 40, label: "60" },
                    { y: 60, label: "80" },

                ]
            }]
        });
        chart.render();

    }



    $.ajax({
        url: '/compliance_status/',
        datatype: 'json',
        type: 'GET',
        success: function (data) {
            var data = [{
                data: [data.yes_percentage, data.no_percentage],
                backgroundColor: [
                    "#008000",
                    "#FF0000",
                ],
                borderColor: "#fff"
            }];
            var options =
            {
                tooltips:
                {
                    enabled: true
                },
                plugins:
                {
                    datalabels:
                    {
                        formatter: (value, ctx) => {
                            let sum = ctx.dataset._meta[0].total;
                            let percentage = (value * 100 / sum).toFixed(2) + "%";
                            return percentage;
                        },
                        color: '#fff',
                    }
                }
            };


            var ctx = document.getElementById("pie-chart").getContext('2d');
            var myChart = new Chart(ctx,
                {
                    type: 'pie',
                    data:
                    {
                        labels: ['Compliance', 'Non Compliance'],
                        datasets: data
                    },
                    options: options
                });
        },
        error: function (data) {
            var data = [{
                data: [60, 40],
                backgroundColor: [
                    "#eea223",
                    "#3b84bd",
                ],
                borderColor: "#fff"
            }];

            var options = {
                tooltips: {
                    enabled: true
                },
                plugins: {
                    datalabels:
                    {
                        formatter: (value, ctx) => {

                            let sum = ctx.dataset._meta[0].total;
                            let percentage = (value * 100 / sum).toFixed(2) + "%";
                            return percentage;


                        },
                        color: '#fff',
                    }
                }
            };


            var ctx = document.getElementById("pie-chart").getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Compliance', 'Non Compliance'],
                    datasets: data
                },
                options: options
            });
        },
    });









</script>







{% endblock %}



    </div>
    <!-- [ Main Content ] end -->


    <!-- Required Js -->
    <script src="/static/assets/js/vendor-all.min.js"></script>
    <script src="/static/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/assets/js/pcoded.min.js"></script>

<script type="text/javascript">
    /*!
 * chartjs-plugin-datalabels v0.7.0
 * https://chartjs-plugin-datalabels.netlify.com
 * (c) 2019 Chart.js Contributors
 * Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):(t=t||self).ChartDataLabels=e(t.Chart)}(this,function(t){"use strict";var e=(t=t&&t.hasOwnProperty("default")?t.default:t).helpers,r=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI||1)/(t.logicalXDPI||1)}return 1}(),n={toTextLines:function(t){var r,n=[];for(t=[].concat(t);t.length;)"string"==typeof(r=t.pop())?n.unshift.apply(n,r.split("\n")):Array.isArray(r)?t.push.apply(t,r):e.isNullOrUndef(t)||n.unshift(""+r);return n},toFontString:function(t){return!t||e.isNullOrUndef(t.size)||e.isNullOrUndef(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family},textSize:function(t,e,r){var n,i=[].concat(e),o=i.length,a=t.font,l=0;for(t.font=r.string,n=0;n<o;++n)l=Math.max(t.measureText(i[n]).width,l);return t.font=a,{height:o*r.lineHeight,width:l}},parseFont:function(r){var i=t.defaults.global,o=e.valueOrDefault(r.size,i.defaultFontSize),a={family:e.valueOrDefault(r.family,i.defaultFontFamily),lineHeight:e.options.toLineHeight(r.lineHeight,o),size:o,style:e.valueOrDefault(r.style,i.defaultFontStyle),weight:e.valueOrDefault(r.weight,null),string:""};return a.string=n.toFontString(a),a},bound:function(t,e,r){return Math.max(t,Math.min(e,r))},arrayDiff:function(t,e){var r,n,i,o,a=t.slice(),l=[];for(r=0,i=e.length;r<i;++r)o=e[r],-1===(n=a.indexOf(o))?l.push([o,1]):a.splice(n,1);for(r=0,i=a.length;r<i;++r)l.push([a[r],-1]);return l},rasterize:function(t){return Math.round(t*r)/r}};function i(t,e){var r=e.x,n=e.y;if(null===r)return{x:0,y:-1};if(null===n)return{x:1,y:0};var i=t.x-r,o=t.y-n,a=Math.sqrt(i*i+o*o);return{x:a?i/a:0,y:a?o/a:-1}}var o=0,a=1,l=2,s=4,u=8;function f(t,e,r){var n=o;return t<r.left?n|=a:t>r.right&&(n|=l),e<r.top?n|=u:e>r.bottom&&(n|=s),n}function d(t,e){var r,n,i=e.anchor,o=t;return e.clamp&&(o=function(t,e){for(var r,n,i,o=t.x0,d=t.y0,c=t.x1,h=t.y1,x=f(o,d,e),y=f(c,h,e);x|y&&!(x&y);)(r=x||y)&u?(n=o+(c-o)*(e.top-d)/(h-d),i=e.top):r&s?(n=o+(c-o)*(e.bottom-d)/(h-d),i=e.bottom):r&l?(i=d+(h-d)*(e.right-o)/(c-o),n=e.right):r&a&&(i=d+(h-d)*(e.left-o)/(c-o),n=e.left),r===x?x=f(o=n,d=i,e):y=f(c=n,h=i,e);return{x0:o,x1:c,y0:d,y1:h}}(o,e.area)),"start"===i?(r=o.x0,n=o.y0):"end"===i?(r=o.x1,n=o.y1):(r=(o.x0+o.x1)/2,n=(o.y0+o.y1)/2),function(t,e,r,n,i){switch(i){case"center":r=n=0;break;case"bottom":r=0,n=1;break;case"right":r=1,n=0;break;case"left":r=-1,n=0;break;case"top":r=0,n=-1;break;case"start":r=-r,n=-n;break;case"end":break;default:i*=Math.PI/180,r=Math.cos(i),n=Math.sin(i)}return{x:t,y:e,vx:r,vy:n}}(r,n,t.vx,t.vy,e.align)}var c={arc:function(t,e){var r=(t.startAngle+t.endAngle)/2,n=Math.cos(r),i=Math.sin(r),o=t.innerRadius,a=t.outerRadius;return d({x0:t.x+n*o,y0:t.y+i*o,x1:t.x+n*a,y1:t.y+i*a,vx:n,vy:i},e)},point:function(t,e){var r=i(t,e.origin),n=r.x*t.radius,o=r.y*t.radius;return d({x0:t.x-n,y0:t.y-o,x1:t.x+n,y1:t.y+o,vx:r.x,vy:r.y},e)},rect:function(t,e){var r=i(t,e.origin),n=t.x,o=t.y,a=0,l=0;return t.horizontal?(n=Math.min(t.x,t.base),a=Math.abs(t.base-t.x)):(o=Math.min(t.y,t.base),l=Math.abs(t.base-t.y)),d({x0:n,y0:o+l,x1:n+a,y1:o,vx:r.x,vy:r.y},e)},fallback:function(t,e){var r=i(t,e.origin);return d({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:r.x,vy:r.y},e)}},h=t.helpers,x=n.rasterize;function y(t){var e=t._model.horizontal,r=t._scale||e&&t._xScale||t._yScale;if(!r)return null;if(void 0!==r.xCenter&&void 0!==r.yCenter)return{x:r.xCenter,y:r.yCenter};var n=r.getBasePixel();return e?{x:n,y:null}:{x:null,y:n}}function v(t,e,r){var n=t.shadowBlur,i=r.stroked,o=x(r.x),a=x(r.y),l=x(r.w);i&&t.strokeText(e,o,a,l),r.filled&&(n&&i&&(t.shadowBlur=0),t.fillText(e,o,a,l),n&&i&&(t.shadowBlur=n))}var _=function(t,e,r,n){var i=this;i._config=t,i._index=n,i._model=null,i._rects=null,i._ctx=e,i._el=r};h.extend(_.prototype,{_modelize:function(e,r,i,o){var a,l=this._index,s=h.options.resolve,u=n.parseFont(s([i.font,{}],o,l)),f=s([i.color,t.defaults.global.defaultFontColor],o,l);return{align:s([i.align,"center"],o,l),anchor:s([i.anchor,"center"],o,l),area:o.chart.chartArea,backgroundColor:s([i.backgroundColor,null],o,l),borderColor:s([i.borderColor,null],o,l),borderRadius:s([i.borderRadius,0],o,l),borderWidth:s([i.borderWidth,0],o,l),clamp:s([i.clamp,!1],o,l),clip:s([i.clip,!1],o,l),color:f,display:e,font:u,lines:r,offset:s([i.offset,0],o,l),opacity:s([i.opacity,1],o,l),origin:y(this._el),padding:h.options.toPadding(s([i.padding,0],o,l)),positioner:(a=this._el,a instanceof t.elements.Arc?c.arc:a instanceof t.elements.Point?c.point:a instanceof t.elements.Rectangle?c.rect:c.fallback),rotation:s([i.rotation,0],o,l)*(Math.PI/180),size:n.textSize(this._ctx,r,u),textAlign:s([i.textAlign,"start"],o,l),textShadowBlur:s([i.textShadowBlur,0],o,l),textShadowColor:s([i.textShadowColor,f],o,l),textStrokeColor:s([i.textStrokeColor,f],o,l),textStrokeWidth:s([i.textStrokeWidth,0],o,l)}},update:function(t){var e,r,i,o=this,a=null,l=null,s=o._index,u=o._config,f=h.options.resolve([u.display,!0],t,s);f&&(e=t.dataset.data[s],r=h.valueOrDefault(h.callback(u.formatter,[e,t]),e),(i=h.isNullOrUndef(r)?[]:n.toTextLines(r)).length&&(l=function(t){var e=t.borderWidth||0,r=t.padding,n=t.size.height,i=t.size.width,o=-i/2,a=-n/2;return{frame:{x:o-r.left-e,y:a-r.top-e,w:i+r.width+2*e,h:n+r.height+2*e},text:{x:o,y:a,w:i,h:n}}}(a=o._modelize(f,i,u,t)))),o._model=a,o._rects=l},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(t,e){var r,i=t.ctx,o=this._model,a=this._rects;this.visible()&&(i.save(),o.clip&&(r=o.area,i.beginPath(),i.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),i.clip()),i.globalAlpha=n.bound(0,o.opacity,1),i.translate(x(e.x),x(e.y)),i.rotate(o.rotation),function(t,e,r){var n=r.backgroundColor,i=r.borderColor,o=r.borderWidth;(n||i&&o)&&(t.beginPath(),h.canvas.roundedRect(t,x(e.x)+o/2,x(e.y)+o/2,x(e.w)-o,x(e.h)-o,r.borderRadius),t.closePath(),n&&(t.fillStyle=n,t.fill()),i&&o&&(t.strokeStyle=i,t.lineWidth=o,t.lineJoin="miter",t.stroke()))}(i,a.frame,o),function(t,e,r,n){var i,o=n.textAlign,a=n.color,l=!!a,s=n.font,u=e.length,f=n.textStrokeColor,d=n.textStrokeWidth,c=f&&d;if(u&&(l||c))for(r=function(t,e,r){var n=r.lineHeight,i=t.w,o=t.x;return"center"===e?o+=i/2:"end"!==e&&"right"!==e||(o+=i),{h:n,w:i,x:o,y:t.y+n/2}}(r,o,s),t.font=s.string,t.textAlign=o,t.textBaseline="middle",t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,l&&(t.fillStyle=a),c&&(t.lineJoin="round",t.lineWidth=d,t.strokeStyle=f),i=0,u=e.length;i<u;++i)v(t,e[i],{stroked:c,filled:l,w:r.w,x:r.x,y:r.y+r.h*i})}(i,o.lines,a.text,o),i.restore())}});var b=t.helpers,p=Number.MIN_SAFE_INTEGER||-9007199254740991,g=Number.MAX_SAFE_INTEGER||9007199254740991;function m(t,e,r){var n=Math.cos(r),i=Math.sin(r),o=e.x,a=e.y;return{x:o+n*(t.x-o)-i*(t.y-a),y:a+i*(t.x-o)+n*(t.y-a)}}function w(t,e){var r,n,i,o,a,l=g,s=p,u=e.origin;for(r=0;r<t.length;++r)i=(n=t[r]).x-u.x,o=n.y-u.y,a=e.vx*i+e.vy*o,l=Math.min(l,a),s=Math.max(s,a);return{min:l,max:s}}function k(t,e){var r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);return{vx:(e.x-t.x)/i,vy:(e.y-t.y)/i,origin:t,ln:i}}var M=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function S(t,e,r){var n=e.positioner(t,e),i=n.vx,o=n.vy;if(!i&&!o)return{x:n.x,y:n.y};var a=r.w,l=r.h,s=e.rotation,u=Math.abs(a/2*Math.cos(s))+Math.abs(l/2*Math.sin(s)),f=Math.abs(a/2*Math.sin(s))+Math.abs(l/2*Math.cos(s)),d=1/Math.max(Math.abs(i),Math.abs(o));return u*=i*d,f*=o*d,u+=e.offset*i,f+=e.offset*o,{x:n.x+u,y:n.y+f}}b.extend(M.prototype,{center:function(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function(t,e,r){this._rotation=r,this._rect={x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}},contains:function(t){var e=this._rect;return!((t=m(t,this.center(),-this._rotation)).x<e.x-1||t.y<e.y-1||t.x>e.x+e.w+2||t.y>e.y+e.h+2)},intersects:function(t){var e,r,n,i=this._points(),o=t._points(),a=[k(i[0],i[1]),k(i[0],i[3])];for(this._rotation!==t._rotation&&a.push(k(o[0],o[1]),k(o[0],o[3])),e=0;e<a.length;++e)if(r=w(i,a[e]),n=w(o,a[e]),r.max<n.min||n.max<r.min)return!1;return!0},_points:function(){var t=this._rect,e=this._rotation,r=this.center();return[m({x:t.x,y:t.y},r,e),m({x:t.x+t.w,y:t.y},r,e),m({x:t.x+t.w,y:t.y+t.h},r,e),m({x:t.x,y:t.y+t.h},r,e)]}});var C={prepare:function(t){var e,r,n,i,o,a=[];for(e=0,n=t.length;e<n;++e)for(r=0,i=t[e].length;r<i;++r)o=t[e][r],a.push(o),o.$layout={_box:new M,_hidable:!1,_visible:!0,_set:e,_idx:r};return a.sort(function(t,e){var r=t.$layout,n=e.$layout;return r._idx===n._idx?n._set-r._set:n._idx-r._idx}),this.update(a),a},update:function(t){var e,r,n,i,o,a=!1;for(e=0,r=t.length;e<r;++e)i=(n=t[e]).model(),(o=n.$layout)._hidable=i&&"auto"===i.display,o._visible=n.visible(),a|=o._hidable;a&&function(t){var e,r,n,i,o,a;for(e=0,r=t.length;e<r;++e)(i=(n=t[e]).$layout)._visible&&(o=n.geometry(),a=S(n._el._model,n.model(),o),i._box.update(a,o,n.rotation()));(function(t,e){var r,n,i,o;for(r=t.length-1;r>=0;--r)for(i=t[r].$layout,n=r-1;n>=0&&i._visible;--n)(o=t[n].$layout)._visible&&i._box.intersects(o._box)&&e(i,o)})(t,function(t,e){var r=t._hidable,n=e._hidable;r&&n||n?e._visible=!1:r&&(t._visible=!1)})}(t)},lookup:function(t,e){var r,n;for(r=t.length-1;r>=0;--r)if((n=t[r].$layout)&&n._visible&&n._box.contains(e))return t[r];return null},draw:function(t,e){var r,n,i,o,a,l;for(r=0,n=e.length;r<n;++r)(o=(i=e[r]).$layout)._visible&&(a=i.geometry(),l=S(i._el._view,i.model(),a),o._box.update(l,a,i.rotation()),i.draw(t,l))}},z=t.helpers,$={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(t){if(z.isNullOrUndef(t))return null;var e,r,n,i=t;if(z.isObject(t))if(z.isNullOrUndef(t.label))if(z.isNullOrUndef(t.r))for(i="",n=0,r=(e=Object.keys(t)).length;n<r;++n)i+=(0!==n?", ":"")+e[n]+": "+t[e[n]];else i=t.r;else i=t.label;return""+i},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},O=t.helpers,A="$datalabels",D="$default";function P(t,e,r){if(e){var n,i=r.$context,o=r.$groups;e[o._set]&&(n=e[o._set][o._key])&&!0===O.callback(n,[i])&&(t[A]._dirty=!0,r.update(i))}}function N(t,e){var r,n,i=t[A],o=i._listeners;if(o.enter||o.leave){if("mousemove"===e.type)n=C.lookup(i._labels,e);else if("mouseout"!==e.type)return;r=i._hovered,i._hovered=n,function(t,e,r,n){var i,o;(r||n)&&(r?n?r!==n&&(o=i=!0):o=!0:i=!0,o&&P(t,e.leave,r),i&&P(t,e.enter,n))}(t,o,r,n)}}t.defaults.global.plugins.datalabels=$;var R={id:"datalabels",beforeInit:function(t){t[A]={_actives:[]}},beforeUpdate:function(t){var e=t[A];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdate:function(t,e,r){var n,i,o,a,l,s,u,f,d=e.index,c=t[A],h=c._datasets[d]=[],x=t.isDatasetVisible(d),y=t.data.datasets[d],v=function(t,e){var r,n,i,o=t.datalabels,a=[];return!1===o?null:(!0===o&&(o={}),e=O.merge({},[e,o]),n=e.labels||{},i=Object.keys(n),delete e.labels,i.length?i.forEach(function(t){n[t]&&a.push(O.merge({},[e,n[t],{_key:t}]))}):a.push(e),r=a.reduce(function(t,e){return O.each(e.listeners||{},function(r,n){t[n]=t[n]||{},t[n][e._key||D]=r}),delete e.listeners,t},{}),{labels:a,listeners:r})}(y,r),b=e.meta.data||[],p=t.ctx;for(p.save(),n=0,o=b.length;n<o;++n)if((u=b[n])[A]=[],x&&u&&!u.hidden&&!u._model.skip)for(i=0,a=v.labels.length;i<a;++i)s=(l=v.labels[i])._key,(f=new _(l,p,u,n)).$groups={_set:d,_key:s||D},f.$context={active:!1,chart:t,dataIndex:n,dataset:y,datasetIndex:d},f.update(f.$context),u[A].push(f),h.push(f);p.restore(),O.merge(c._listeners,v.listeners,{merger:function(t,r,n){r[t]=r[t]||{},r[t][e.index]=n[t],c._listened=!0}})},afterUpdate:function(t,e){t[A]._labels=C.prepare(t[A]._datasets,e)},afterDatasetsDraw:function(t){C.draw(t,t[A]._labels)},beforeEvent:function(t,e){if(t[A]._listened)switch(e.type){case"mousemove":case"mouseout":N(t,e);break;case"click":!function(t,e){var r=t[A],n=r._listeners.click,i=n&&C.lookup(r._labels,e);i&&P(t,n,i)}(t,e)}},afterEvent:function(e){var r,i,o,a,l,s,u,f=e[A],d=f._actives,c=f._actives=e.lastActive||[],h=n.arrayDiff(d,c);for(r=0,i=h.length;r<i;++r)if((l=h[r])[1])for(o=0,a=(u=l[0][A]||[]).length;o<a;++o)(s=u[o]).$context.active=1===l[1],s.update(s.$context);(f._dirty||h.length)&&(C.update(f._labels),function(e){if(!e.animating){for(var r=t.animationService.animations,n=0,i=r.length;n<i;++n)if(r[n].chart===e)return;e.render({duration:1,lazy:!0})}}(e)),delete f._dirty}};return t.plugins.register(R),R});
</script>

<script type="text/javascript">
    

</script>
</body>
</html>





























