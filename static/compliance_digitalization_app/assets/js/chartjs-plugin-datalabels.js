!
  chartjs-plugin-datalabels v0.7.0
  httpschartjs-plugin-datalabels.netlify.com
  (c) 2019 Chart.js Contributors
  Released under the MIT license
 
!function(t,e){object==typeof exports&&undefined!=typeof modulemodule.exports=e(require(chart.js))function==typeof define&&define.amddefine([chart.js],e)(t=tself).ChartDataLabels=e(t.Chart)}(this,function(t){use strict;var e=(t=t&&t.hasOwnProperty(default)t.defaultt).helpers,r=function(){if(undefined!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t)return(t.deviceXDPI1)(t.logicalXDPI1)}return 1}(),n={toTextLinesfunction(t){var r,n=[];for(t=[].concat(t);t.length;)string==typeof(r=t.pop())n.unshift.apply(n,r.split(n))Array.isArray(r)t.push.apply(t,r)e.isNullOrUndef(t)n.unshift(+r);return n},toFontStringfunction(t){return!te.isNullOrUndef(t.size)e.isNullOrUndef(t.family)null(t.stylet.style+ )+(t.weightt.weight+ )+t.size+px +t.family},textSizefunction(t,e,r){var n,i=[].concat(e),o=i.length,a=t.font,l=0;for(t.font=r.string,n=0;no;++n)l=Math.max(t.measureText(i[n]).width,l);return t.font=a,{heightor.lineHeight,widthl}},parseFontfunction(r){var i=t.defaults.global,o=e.valueOrDefault(r.size,i.defaultFontSize),a={familye.valueOrDefault(r.family,i.defaultFontFamily),lineHeighte.options.toLineHeight(r.lineHeight,o),sizeo,stylee.valueOrDefault(r.style,i.defaultFontStyle),weighte.valueOrDefault(r.weight,null),string};return a.string=n.toFontString(a),a},boundfunction(t,e,r){return Math.max(t,Math.min(e,r))},arrayDifffunction(t,e){var r,n,i,o,a=t.slice(),l=[];for(r=0,i=e.length;ri;++r)o=e[r],-1===(n=a.indexOf(o))l.push([o,1])a.splice(n,1);for(r=0,i=a.length;ri;++r)l.push([a[r],-1]);return l},rasterizefunction(t){return Math.round(tr)r}};function i(t,e){var r=e.x,n=e.y;if(null===r)return{x0,y-1};if(null===n)return{x1,y0};var i=t.x-r,o=t.y-n,a=Math.sqrt(ii+oo);return{xaia0,yaoa-1}}var o=0,a=1,l=2,s=4,u=8;function f(t,e,r){var n=o;return tr.leftn=atr.right&&(n=l),er.topn=uer.bottom&&(n=s),n}function d(t,e){var r,n,i=e.anchor,o=t;return e.clamp&&(o=function(t,e){for(var r,n,i,o=t.x0,d=t.y0,c=t.x1,h=t.y1,x=f(o,d,e),y=f(c,h,e);xy&&!(x&y);)(r=xy)&u(n=o+(c-o)(e.top-d)(h-d),i=e.top)r&s(n=o+(c-o)(e.bottom-d)(h-d),i=e.bottom)r&l(i=d+(h-d)(e.right-o)(c-o),n=e.right)r&a&&(i=d+(h-d)(e.left-o)(c-o),n=e.left),r===xx=f(o=n,d=i,e)y=f(c=n,h=i,e);return{x0o,x1c,y0d,y1h}}(o,e.area)),start===i(r=o.x0,n=o.y0)end===i(r=o.x1,n=o.y1)(r=(o.x0+o.x1)2,n=(o.y0+o.y1)2),function(t,e,r,n,i){switch(i){casecenterr=n=0;break;casebottomr=0,n=1;break;caserightr=1,n=0;break;caseleftr=-1,n=0;break;casetopr=0,n=-1;break;casestartr=-r,n=-n;break;caseendbreak;defaulti=Math.PI180,r=Math.cos(i),n=Math.sin(i)}return{xt,ye,vxr,vyn}}(r,n,t.vx,t.vy,e.align)}var c={arcfunction(t,e){var r=(t.startAngle+t.endAngle)2,n=Math.cos(r),i=Math.sin(r),o=t.innerRadius,a=t.outerRadius;return d({x0t.x+no,y0t.y+io,x1t.x+na,y1t.y+ia,vxn,vyi},e)},pointfunction(t,e){var r=i(t,e.origin),n=r.xt.radius,o=r.yt.radius;return d({x0t.x-n,y0t.y-o,x1t.x+n,y1t.y+o,vxr.x,vyr.y},e)},rectfunction(t,e){var r=i(t,e.origin),n=t.x,o=t.y,a=0,l=0;return t.horizontal(n=Math.min(t.x,t.base),a=Math.abs(t.base-t.x))(o=Math.min(t.y,t.base),l=Math.abs(t.base-t.y)),d({x0n,y0o+l,x1n+a,y1o,vxr.x,vyr.y},e)},fallbackfunction(t,e){var r=i(t,e.origin);return d({x0t.x,y0t.y,x1t.x,y1t.y,vxr.x,vyr.y},e)}},h=t.helpers,x=n.rasterize;function y(t){var e=t._model.horizontal,r=t._scalee&&t._xScalet._yScale;if(!r)return null;if(void 0!==r.xCenter&&void 0!==r.yCenter)return{xr.xCenter,yr.yCenter};var n=r.getBasePixel();return e{xn,ynull}{xnull,yn}}function v(t,e,r){var n=t.shadowBlur,i=r.stroked,o=x(r.x),a=x(r.y),l=x(r.w);i&&t.strokeText(e,o,a,l),r.filled&&(n&&i&&(t.shadowBlur=0),t.fillText(e,o,a,l),n&&i&&(t.shadowBlur=n))}var _=function(t,e,r,n){var i=this;i._config=t,i._index=n,i._model=null,i._rects=null,i._ctx=e,i._el=r};h.extend(_.prototype,{_modelizefunction(e,r,i,o){var a,l=this._index,s=h.options.resolve,u=n.parseFont(s([i.font,{}],o,l)),f=s([i.color,t.defaults.global.defaultFontColor],o,l);return{aligns([i.align,center],o,l),anchors([i.anchor,center],o,l),areao.chart.chartArea,backgroundColors([i.backgroundColor,null],o,l),borderColors([i.borderColor,null],o,l),borderRadiuss([i.borderRadius,0],o,l),borderWidths([i.borderWidth,0],o,l),clamps([i.clamp,!1],o,l),clips([i.clip,!1],o,l),colorf,displaye,fontu,linesr,offsets([i.offset,0],o,l),opacitys([i.opacity,1],o,l),originy(this._el),paddingh.options.toPadding(s([i.padding,0],o,l)),positioner(a=this._el,a instanceof t.elements.Arcc.arca instanceof t.elements.Pointc.pointa instanceof t.elements.Rectanglec.rectc.fallback),rotations([i.rotation,0],o,l)(Math.PI180),sizen.textSize(this._ctx,r,u),textAligns([i.textAlign,start],o,l),textShadowBlurs([i.textShadowBlur,0],o,l),textShadowColors([i.textShadowColor,f],o,l),textStrokeColors([i.textStrokeColor,f],o,l),textStrokeWidths([i.textStrokeWidth,0],o,l)}},updatefunction(t){var e,r,i,o=this,a=null,l=null,s=o._index,u=o._config,f=h.options.resolve([u.display,!0],t,s);f&&(e=t.dataset.data[s],r=h.valueOrDefault(h.callback(u.formatter,[e,t]),e),(i=h.isNullOrUndef(r)[]n.toTextLines(r)).length&&(l=function(t){var e=t.borderWidth0,r=t.padding,n=t.size.height,i=t.size.width,o=-i2,a=-n2;return{frame{xo-r.left-e,ya-r.top-e,wi+r.width+2e,hn+r.height+2e},text{xo,ya,wi,hn}}}(a=o._modelize(f,i,u,t)))),o._model=a,o._rects=l},geometryfunction(){return this._rectsthis._rects.frame{}},rotationfunction(){return this._modelthis._model.rotation0},visiblefunction(){return this._model&&this._model.opacity},modelfunction(){return this._model},drawfunction(t,e){var r,i=t.ctx,o=this._model,a=this._rects;this.visible()&&(i.save(),o.clip&&(r=o.area,i.beginPath(),i.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),i.clip()),i.globalAlpha=n.bound(0,o.opacity,1),i.translate(x(e.x),x(e.y)),i.rotate(o.rotation),function(t,e,r){var n=r.backgroundColor,i=r.borderColor,o=r.borderWidth;(ni&&o)&&(t.beginPath(),h.canvas.roundedRect(t,x(e.x)+o2,x(e.y)+o2,x(e.w)-o,x(e.h)-o,r.borderRadius),t.closePath(),n&&(t.fillStyle=n,t.fill()),i&&o&&(t.strokeStyle=i,t.lineWidth=o,t.lineJoin=miter,t.stroke()))}(i,a.frame,o),function(t,e,r,n){var i,o=n.textAlign,a=n.color,l=!!a,s=n.font,u=e.length,f=n.textStrokeColor,d=n.textStrokeWidth,c=f&&d;if(u&&(lc))for(r=function(t,e,r){var n=r.lineHeight,i=t.w,o=t.x;returncenter===eo+=i2end!==e&&right!==e(o+=i),{hn,wi,xo,yt.y+n2}}(r,o,s),t.font=s.string,t.textAlign=o,t.textBaseline=middle,t.shadowBlur=n.textShadowBlur,t.shadowColor=n.textShadowColor,l&&(t.fillStyle=a),c&&(t.lineJoin=round,t.lineWidth=d,t.strokeStyle=f),i=0,u=e.length;iu;++i)v(t,e[i],{strokedc,filledl,wr.w,xr.x,yr.y+r.hi})}(i,o.lines,a.text,o),i.restore())}});var b=t.helpers,p=Number.MIN_SAFE_INTEGER-9007199254740991,g=Number.MAX_SAFE_INTEGER9007199254740991;function m(t,e,r){var n=Math.cos(r),i=Math.sin(r),o=e.x,a=e.y;return{xo+n(t.x-o)-i(t.y-a),ya+i(t.x-o)+n(t.y-a)}}function w(t,e){var r,n,i,o,a,l=g,s=p,u=e.origin;for(r=0;rt.length;++r)i=(n=t[r]).x-u.x,o=n.y-u.y,a=e.vxi+e.vyo,l=Math.min(l,a),s=Math.max(s,a);return{minl,maxs}}function k(t,e){var r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(rr+nn);return{vx(e.x-t.x)i,vy(e.y-t.y)i,origint,lni}}var M=function(){this._rotation=0,this._rect={x0,y0,w0,h0}};function S(t,e,r){var n=e.positioner(t,e),i=n.vx,o=n.vy;if(!i&&!o)return{xn.x,yn.y};var a=r.w,l=r.h,s=e.rotation,u=Math.abs(a2Math.cos(s))+Math.abs(l2Math.sin(s)),f=Math.abs(a2Math.sin(s))+Math.abs(l2Math.cos(s)),d=1Math.max(Math.abs(i),Math.abs(o));return u=id,f=od,u+=e.offseti,f+=e.offseto,{xn.x+u,yn.y+f}}b.extend(M.prototype,{centerfunction(){var t=this._rect;return{xt.x+t.w2,yt.y+t.h2}},updatefunction(t,e,r){this._rotation=r,this._rect={xe.x+t.x,ye.y+t.y,we.w,he.h}},containsfunction(t){var e=this._rect;return!((t=m(t,this.center(),-this._rotation)).xe.x-1t.ye.y-1t.xe.x+e.w+2t.ye.y+e.h+2)},intersectsfunction(t){var e,r,n,i=this._points(),o=t._points(),a=[k(i[0],i[1]),k(i[0],i[3])];for(this._rotation!==t._rotation&&a.push(k(o[0],o[1]),k(o[0],o[3])),e=0;ea.length;++e)if(r=w(i,a[e]),n=w(o,a[e]),r.maxn.minn.maxr.min)return!1;return!0},_pointsfunction(){var t=this._rect,e=this._rotation,r=this.center();return[m({xt.x,yt.y},r,e),m({xt.x+t.w,yt.y},r,e),m({xt.x+t.w,yt.y+t.h},r,e),m({xt.x,yt.y+t.h},r,e)]}});var C={preparefunction(t){var e,r,n,i,o,a=[];for(e=0,n=t.length;en;++e)for(r=0,i=t[e].length;ri;++r)o=t[e][r],a.push(o),o.$layout={_boxnew M,_hidable!1,_visible!0,_sete,_idxr};return a.sort(function(t,e){var r=t.$layout,n=e.$layout;return r._idx===n._idxn._set-r._setn._idx-r._idx}),this.update(a),a},updatefunction(t){var e,r,n,i,o,a=!1;for(e=0,r=t.length;er;++e)i=(n=t[e]).model(),(o=n.$layout)._hidable=i&&auto===i.display,o._visible=n.visible(),a=o._hidable;a&&function(t){var e,r,n,i,o,a;for(e=0,r=t.length;er;++e)(i=(n=t[e]).$layout)._visible&&(o=n.geometry(),a=S(n._el._model,n.model(),o),i._box.update(a,o,n.rotation()));(function(t,e){var r,n,i,o;for(r=t.length-1;r=0;--r)for(i=t[r].$layout,n=r-1;n=0&&i._visible;--n)(o=t[n].$layout)._visible&&i._box.intersects(o._box)&&e(i,o)})(t,function(t,e){var r=t._hidable,n=e._hidable;r&&nne._visible=!1r&&(t._visible=!1)})}(t)},lookupfunction(t,e){var r,n;for(r=t.length-1;r=0;--r)if((n=t[r].$layout)&&n._visible&&n._box.contains(e))return t[r];return null},drawfunction(t,e){var r,n,i,o,a,l;for(r=0,n=e.length;rn;++r)(o=(i=e[r]).$layout)._visible&&(a=i.geometry(),l=S(i._el._view,i.model(),a),o._box.update(l,a,i.rotation()),i.draw(t,l))}},z=t.helpers,$={aligncenter,anchorcenter,backgroundColornull,borderColornull,borderRadius0,borderWidth0,clamp!1,clip!1,colorvoid 0,display!0,font{familyvoid 0,lineHeight1.2,sizevoid 0,stylevoid 0,weightnull},formatterfunction(t){if(z.isNullOrUndef(t))return null;var e,r,n,i=t;if(z.isObject(t))if(z.isNullOrUndef(t.label))if(z.isNullOrUndef(t.r))for(i=,n=0,r=(e=Object.keys(t)).length;nr;++n)i+=(0!==n, )+e[n]+ +t[e[n]];else i=t.r;else i=t.label;return+i},labelsvoid 0,listeners{},offset4,opacity1,padding{top4,right4,bottom4,left4},rotation0,textAlignstart,textStrokeColorvoid 0,textStrokeWidth0,textShadowBlur0,textShadowColorvoid 0},O=t.helpers,A=$datalabels,D=$default;function P(t,e,r){if(e){var n,i=r.$context,o=r.$groups;e[o._set]&&(n=e[o._set][o._key])&&!0===O.callback(n,[i])&&(t[A]._dirty=!0,r.update(i))}}function N(t,e){var r,n,i=t[A],o=i._listeners;if(o.entero.leave){if(mousemove===e.type)n=C.lookup(i._labels,e);else if(mouseout!==e.type)return;r=i._hovered,i._hovered=n,function(t,e,r,n){var i,o;(rn)&&(rnr!==n&&(o=i=!0)o=!0i=!0,o&&P(t,e.leave,r),i&&P(t,e.enter,n))}(t,o,r,n)}}t.defaults.global.plugins.datalabels=$;var R={iddatalabels,beforeInitfunction(t){t[A]={_actives[]}},beforeUpdatefunction(t){var e=t[A];e._listened=!1,e._listeners={},e._datasets=[],e._labels=[]},afterDatasetUpdatefunction(t,e,r){var n,i,o,a,l,s,u,f,d=e.index,c=t[A],h=c._datasets[d]=[],x=t.isDatasetVisible(d),y=t.data.datasets[d],v=function(t,e){var r,n,i,o=t.datalabels,a=[];return!1===onull(!0===o&&(o={}),e=O.merge({},[e,o]),n=e.labels{},i=Object.keys(n),delete e.labels,i.lengthi.forEach(function(t){n[t]&&a.push(O.merge({},[e,n[t],{_keyt}]))})a.push(e),r=a.reduce(function(t,e){return O.each(e.listeners{},function(r,n){t[n]=t[n]{},t[n][e._keyD]=r}),delete e.listeners,t},{}),{labelsa,listenersr})}(y,r),b=e.meta.data[],p=t.ctx;for(p.save(),n=0,o=b.length;no;++n)if((u=b[n])[A]=[],x&&u&&!u.hidden&&!u._model.skip)for(i=0,a=v.labels.length;ia;++i)s=(l=v.labels[i])._key,(f=new _(l,p,u,n)).$groups={_setd,_keysD},f.$context={active!1,chartt,dataIndexn,datasety,datasetIndexd},f.update(f.$context),u[A].push(f),h.push(f);p.restore(),O.merge(c._listeners,v.listeners,{mergerfunction(t,r,n){r[t]=r[t]{},r[t][e.index]=n[t],c._listened=!0}})},afterUpdatefunction(t,e){t[A]._labels=C.prepare(t[A]._datasets,e)},afterDatasetsDrawfunction(t){C.draw(t,t[A]._labels)},beforeEventfunction(t,e){if(t[A]._listened)switch(e.type){casemousemovecasemouseoutN(t,e);break;caseclick!function(t,e){var r=t[A],n=r._listeners.click,i=n&&C.lookup(r._labels,e);i&&P(t,n,i)}(t,e)}},afterEventfunction(e){var r,i,o,a,l,s,u,f=e[A],d=f._actives,c=f._actives=e.lastActive[],h=n.arrayDiff(d,c);for(r=0,i=h.length;ri;++r)if((l=h[r])[1])for(o=0,a=(u=l[0][A][]).length;oa;++o)(s=u[o]).$context.active=1===l[1],s.update(s.$context);(f._dirtyh.length)&&(C.update(f._labels),function(e){if(!e.animating){for(var r=t.animationService.animations,n=0,i=r.length;ni;++n)if(r[n].chart===e)return;e.render({duration1,lazy!0})}}(e)),delete f._dirty}};return t.plugins.register(R),R});